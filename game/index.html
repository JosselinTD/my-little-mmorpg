<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>
		body {
			overflow: hidden;
		}
	</style>
</head>
<body>
	<div id="stage"></div>
	<script type="text/javascript" src="../node_modules/craftyjs/dist/crafty.js"></script>
	<script type="text/javascript">
		var stageLength = 2000;
		var canvasLength = 800;

		Crafty.init(800, 600, 'stage');

		var player = Crafty.e("2D, Canvas, Color, Twoway, Gravity")
		    .attr({x:600, y:10, w:30, h:40})
		    .color("red")
		    .twoway(200)
		    .gravityConst(750)
		    .gravity("Floor")
		    .bind('Move', follow);

		Crafty.e("2D, Canvas, Color, Floor")
			.attr({x:0, y:550, w:400, h:50})
			.color("black");
		Crafty.e("2D, Canvas, Color, Floor")
			.attr({x:450, y:550, w:800, h:50})
			.color("black");
		
		Crafty.viewport.scroll('x', -500);

		function follow() {
			var rect = Crafty.viewport.rect();

	    	if (this.x < 100 || this.x > 1900) {
	    		return;
	    	}

	    	if (this.x < rect._x + 100) {
	    		Crafty.viewport.scroll('x', - (this.x - 100));
	    	}

	    	if (this.x + this.w > rect._x + rect._w - 100) {
	    		var newVal = - (this.x + this.w + 100 - rect._w)
	    		Crafty.viewport.scroll('x', newVal);
	    	}
		}
	</script>
</body>
</html>
